experiment_name: triage_v_gate_v1
seed: 42
triage_labels:
  urgent:
  - melanoma
  - melanoma_in_situ
  - melanoma in situ
  - mel
  - bcc
  - basal cell carcinoma
  - scc
  - squamous cell carcinoma
  - atypical_nevus
  routine:
  - benign_keratosis
  - bkl
  - dermatofibroma
  - df
  - nevus
  - nv
  - vascular_lesion
  - vasc
  - akiec
  reassurance:
  - lentigo
  - lnt
  - vascular
  - normal_skin
  - normal skin
input_manifests:
  baseline: data/quality/manifest.csv
quality_model:
  checkpoint: models/snapcheck_quality.pt
  threshold_strategy: per_label
  thresholds_path: reports/diqa/thresholds.json
vlm_backends:
- name: qwen2_vl_2b
  type: huggingface
  model_id: models/qwen2_vl_2b
  device: cuda_if_available
  max_new_tokens: 80
  temperature: 0.0
  torch_dtype: float16
  device_map: auto
  model_kwargs:
    low_cpu_mem_usage: true
  prompt_template: configs/prompts/diagnosis_singleline.txt
simulation:
  cache_responses: true
  cache_dir: reports/triage/cache
  random_subset: false
  store_reasoning_traces: true
  trace_dir: reports/triage/traces
metrics:
- name: triage_accuracy
- name: urgent_recall
- name: urgency_miss_rate
- name: safe_reassurance_rate
- name: token_usage
- name: latency
outputs:
  summary_csv: reports/triage/triage_detail.csv
  summary_backend_csv: reports/triage/triage_summary.csv
  confusion_matrices_dir: reports/triage/confusion
